### This YAML card is automatically produced ###

###############
## Main info ## 
###############

## Routine name
routine_name: PNetXbbVsQCD_ak8_inclWP_2022preEE_NanoV12_frozen

## Type of the tagger, can be 'bb', 'cc', or 'qq'. This is used in the choice of proxy - e.g. for 'bb' one use
## g->bb as the proxy of bb resonance signal and extract the SF from the flavour B component.
type: bb

## Year of the UL condition. Can be 2016APV, 2016, 2017, 2018, 2022, 2022preEE, 2022postEE, 2023preBPIX, 2023postBPIX
year: 2022preEE

## Prefix of the main samples produced from NanoHRT. $YEAR is a placeholder of year in the format above
## This need not be changed except for expert use.
sample_prefix: /media/Disk1/rgerosa/CalibrationHbb/ntuples_300524_ak8_qcd_$YEAR

## Jet pT edges to define multiple exclusive ranges for fit
## e.g. for edges [e1, e2, e3], will define three pT range [e1, e2), [e2, e3), [e3, +inf)
pt_edges: [250, 350, 450, 550, 700]

## [Optional]: Step 4 will by default run the impact for the central fit point, which is time-consuming.
## For this example we temporarily disable the feature, which does not affect the scale factors. 
run_impact_for_central_fit: false  # default: true
run_freeze_other_sf: true

## custom config!!
custom_sfbdt_path: /eos/user/c/coli/cms-repo/boohft-calib/sfbdt_models/20221106/tau31_10_10_fj1_model/std/xgb_train.model
custom_sfbdt_kfold: 5
custom_selection: (fj_x_pt>250) & (fj_x_sdmass>50) & (fj_x_sdmass<200) & (fj_x_ParticleNetMD_XbbVsQCD>=0)

#######################
## Tagger defination ##
#######################
tagger:
  ## The variable name or expression of the tagger. Name convention same to that stored under NanoAODv9.
  ## example expression: FatJet_particleNetMD_Xbb / (FatJet_particleNetMD_Xbb + FatJet_particleNetMD_QCD)
  expr: FatJet_particleNetMD_XbbVsQCD
  ## Span of the tagger range
  span: [0., 1.]

  ## Dictionary of the custom working points defined in user's analysis. Derived SFs directly corrspond
  ## to these WPs. Format: {name: [low, high], ...}
  ## Note: below values are taken only as an example. Please optimize and choose the WPs dedicated to
  ## the user's anlaysis
  wps: {HP: [0.95, 1.00], MP: [0.90, 0.95], LP: [0.80, 0.90]} # official UL WPs

  ## Label name of the tagger
  label: ParticleNet-MD bbVsQCD

########################
## Main analysis tree ##
########################
## Specify the main analysis tree used to extract the signal tagger shape

main_analysis_tree:
  ## path: ROOT file path of the user's signal sample. $YEAR is a placeholder of year in the format above
  ## treename: the name of the tree to read in the file
  path: /media/Disk1/rgerosa/CalibrationHbb/ntuples_300524_ak8_higgs_$YEAR/mc/gghbb_tree.root
  treename: Events

  ## The selection used for this sample applied in the user's analysis. This will ensure us to find the
  ## correct g->bb/cc/qq jet phase-space (for bb/cc/qq-type calibration respectively) that serves as a
  ## reasonable proxy to the resonance signal jets under this user-specified selection
  ## *NOTE*: should always use parentheses between & and |
  selection: (fj_1_pt>250) & (fj_1_dr_H<0.8) & (fj_1_dr_H_daus<0.8) & (fj_1_sdmass>50) & (fj_1_sdmass<200) & (fj_1_ParticleNetMD_XbbVsQCD>=0)
  
  ## Name or expression of the same tagger variable defined in this tree
  tagger: fj_1_ParticleNetMD_XbbVsQCD

  ## Event weight expression used in the user's analysis
  weight: genWeight*xsecWeight*puWeight
